# ===========================================
# Dify Configuration for Coolify Deployment
# ===========================================
# Copy this file to .env before running docker-compose

# ------------------------------
# Domain URLs
# ------------------------------
CONSOLE_API_URL=https://dify.console.api.pitchdb.agency
CONSOLE_WEB_URL=https://dify.console.pitchdb.agency
SERVICE_API_URL=https://dify.api.pitchdb.agency
TRIGGER_URL=https://api.dify.pitchdb.agency
APP_API_URL=https://dify.api.app.pitchdb.agency
APP_WEB_URL=https://dify.pitchdb.agency
FILES_URL=https://dify.api.pitchdb.agency

# ------------------------------
# Security Keys (CHANGE IN PRODUCTION)
# ------------------------------
SECRET_KEY=sk-9f73s3ljTXVcMT3Blb3ljTqtsKiGHXVcMT3BlbkFJLK7U
PLUGIN_DAEMON_KEY=lYkiYYT6owG+71oLerGzA7GXCgOT++6ovaezWAjpCjf+Sjc3ZtU+qUEi
PLUGIN_DIFY_INNER_API_KEY=QaHbTe77CtuXmsfyhR7+vRjI/+XbV1AaFy691iy+kGDv2Jvy0/eAh8Y1
SANDBOX_API_KEY=dify-sandbox
CODE_EXECUTION_API_KEY=dify-sandbox

# ------------------------------
# Database Configuration (External Supabase Postgres)
# ------------------------------
DB_TYPE=postgresql
DB_HOST=supabase-db
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=QqipHLlRg5Xslef0Nc6XRvWci69Ljb33
DB_DATABASE=dify
DB_PLUGIN_DATABASE=dify_plugin

# Database Pool Settings
SQLALCHEMY_POOL_SIZE=30
SQLALCHEMY_MAX_OVERFLOW=10
SQLALCHEMY_POOL_RECYCLE=3600

# ------------------------------
# Redis Configuration
# ------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=difyai123456
REDIS_DB=0

# Celery Broker
CELERY_BROKER_URL=redis://:difyai123456@redis:6379/1

# ------------------------------
# Vector Store Configuration (Weaviate)
# ------------------------------
VECTOR_STORE=weaviate
WEAVIATE_ENDPOINT=http://weaviate:8090
WEAVIATE_API_KEY=WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih
WEAVIATE_GRPC_ENDPOINT=grpc://weaviate:50051

# Weaviate Service Configuration
WEAVIATE_AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED=false
WEAVIATE_AUTHENTICATION_APIKEY_ENABLED=true
WEAVIATE_AUTHENTICATION_APIKEY_ALLOWED_KEYS=WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih
WEAVIATE_AUTHENTICATION_APIKEY_USERS=hello@dify.ai
WEAVIATE_AUTHORIZATION_ADMINLIST_ENABLED=true
WEAVIATE_AUTHORIZATION_ADMINLIST_USERS=hello@dify.ai

# ------------------------------
# Storage Configuration
# ------------------------------
STORAGE_TYPE=opendal
OPENDAL_SCHEME=fs
OPENDAL_FS_ROOT=storage

# ------------------------------
# Server Configuration
# ------------------------------
LOG_LEVEL=INFO
DEBUG=false
FLASK_DEBUG=false
DEPLOY_ENV=PRODUCTION
MIGRATION_ENABLED=true

# API Server
DIFY_BIND_ADDRESS=0.0.0.0
DIFY_PORT=5001
SERVER_WORKER_AMOUNT=1
SERVER_WORKER_CLASS=gevent
GUNICORN_TIMEOUT=360

# ------------------------------
# Sandbox Configuration
# ------------------------------
SANDBOX_PORT=8194
SANDBOX_GIN_MODE=release
SANDBOX_WORKER_TIMEOUT=15
SANDBOX_ENABLE_NETWORK=true
SANDBOX_HTTP_PROXY=http://ssrf_proxy:3128
SANDBOX_HTTPS_PROXY=http://ssrf_proxy:3128
CODE_EXECUTION_ENDPOINT=http://sandbox:8194

# ------------------------------
# Plugin Daemon Configuration
# ------------------------------
PLUGIN_DAEMON_PORT=5002
PLUGIN_DAEMON_URL=http://plugin_daemon:5002
PLUGIN_DIFY_INNER_API_URL=http://api:5001
PLUGIN_DEBUGGING_HOST=0.0.0.0
PLUGIN_DEBUGGING_PORT=5003
EXPOSE_PLUGIN_DEBUGGING_PORT=5003
PLUGIN_STORAGE_TYPE=local
PLUGIN_STORAGE_LOCAL_ROOT=/app/storage
PLUGIN_WORKING_PATH=/app/storage/cwd
PLUGIN_MAX_PACKAGE_SIZE=52428800
PLUGIN_MAX_EXECUTION_TIMEOUT=600
PLUGIN_DAEMON_TIMEOUT=600.0
FORCE_VERIFYING_SIGNATURE=true
MARKETPLACE_ENABLED=true
MARKETPLACE_API_URL=https://marketplace.dify.ai

# ------------------------------
# SSRF Proxy Configuration
# ------------------------------
SSRF_PROXY_HTTP_URL=http://ssrf_proxy:3128
SSRF_PROXY_HTTPS_URL=http://ssrf_proxy:3128
SSRF_HTTP_PORT=3128
SSRF_REVERSE_PROXY_PORT=8194
SSRF_SANDBOX_HOST=sandbox

# ------------------------------
# Nginx Configuration
# ------------------------------
NGINX_SERVER_NAME=_
NGINX_HTTPS_ENABLED=false
NGINX_PORT=84
NGINX_SSL_PORT=446
EXPOSE_NGINX_PORT=8089
EXPOSE_NGINX_SSL_PORT=8443
NGINX_WORKER_PROCESSES=auto
NGINX_CLIENT_MAX_BODY_SIZE=100M
NGINX_KEEPALIVE_TIMEOUT=65
NGINX_PROXY_READ_TIMEOUT=3600s
NGINX_PROXY_SEND_TIMEOUT=3600s

# ------------------------------
# File Upload Limits
# ------------------------------
UPLOAD_FILE_SIZE_LIMIT=15
UPLOAD_FILE_BATCH_LIMIT=5
UPLOAD_IMAGE_FILE_SIZE_LIMIT=10
UPLOAD_VIDEO_FILE_SIZE_LIMIT=100
UPLOAD_AUDIO_FILE_SIZE_LIMIT=50

# ------------------------------
# Workflow Configuration
# ------------------------------
WORKFLOW_MAX_EXECUTION_STEPS=500
WORKFLOW_MAX_EXECUTION_TIME=1200
WORKFLOW_CALL_MAX_DEPTH=5

# ------------------------------
# CORS Configuration
# ------------------------------
WEB_API_CORS_ALLOW_ORIGINS=https://dify.pitchdb.agency
CONSOLE_CORS_ALLOW_ORIGINS=https://dify.console.pitchdb.agency

# ------------------------------
# Encoding
# ------------------------------
LANG=C.UTF-8
LC_ALL=C.UTF-8
PYTHONIOENCODING=utf-8

INIT_PASSWORD=SECURE-PASSWORD